const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Annotator-CgNpxiFD.js","assets/index-tqH9nwEH.js","assets/index-D31B4BQH.css","assets/MockupFrame-pKZ0Yb9b.js","assets/PagesPreviewModal-wm4RTMk1.js","assets/Silk-BXyBIzFR.js"])))=>i.map(i=>d[i]);
import{R as i,j as e,_ as N}from"./index-tqH9nwEH.js";import{b as M}from"./banner-DoJb6kMf.js";function y(r){var u,c,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var d=r.length;for(u=0;u<d;u++)r[u]&&(c=y(r[u]))&&(n&&(n+=" "),n+=c)}else for(c in r)r[c]&&(n&&(n+=" "),n+=c);return n}function T(){for(var r,u,c=0,n="",d=arguments.length;c<d;c++)(r=arguments[c])&&(u=y(r))&&(n&&(n+=" "),n+=u);return n}const H=i.lazy(()=>N(()=>import("./Annotator-CgNpxiFD.js"),__vite__mapDeps([0,1,2,3]))),L=i.lazy(()=>N(()=>import("./PagesPreviewModal-wm4RTMk1.js"),__vite__mapDeps([4,1,2,3,5]))),f=[{key:"A4_P",label:"A4 Dọc (1240×1754)",width:1240,height:1754,maxCols:3,maxRows:2},{key:"A4_L",label:"A4 Ngang (1754×1240)",width:1754,height:1240,maxCols:5,maxRows:1},{key:"HD_16_9",label:"16:9 (1920×1080)",width:1920,height:1080,maxCols:5,maxRows:1}];function U(){return Math.random().toString(36).slice(2)}function O(){const[r,u]=i.useState("HƯỚNG DẪN SỬ DỤNG"),[c,n]=i.useState(M),[d,x]=i.useState([]),[m,p]=i.useState(0),[w,S]=i.useState("rect"),[F]=i.useState("#f43f5e"),[g,P]=i.useState(f[1]),[b,_]=i.useState(2),[R,j]=i.useState(!1),k=d[m]||null;function C(t){var l;const s=(l=t.target.files)==null?void 0:l[0];if(!s)return;const a=new FileReader;a.onload=()=>n(String(a.result)),a.readAsDataURL(s)}function A(t){const s=t.target.files;if(!s||!s.length)return;const a=[];for(const l of Array.from(s))a.push(new Promise(o=>{const h=new FileReader;h.onload=()=>o({id:U(),src:String(h.result),description:"",shapes:[]}),h.readAsDataURL(l)}));Promise.all(a).then(l=>{x(o=>{const h=[...o,...l];return!o.length&&h.length&&p(0),h}),t.target.value=""})}function D(t,s){x(a=>a.map(l=>l.id===t?{...l,description:s}:l))}function v(t){x(s=>s.map(a=>a.id===t.id?t:a))}function z(){const t=d[m];t&&v({...t,annotatedSrc:void 0,shapes:[]})}function E(t){x(s=>{const a=s.findIndex(o=>o.id===t),l=s.filter(o=>o.id!==t);return p(o=>l.length===0?0:a===-1?o:o>l.length-1?l.length-1:a<=o?Math.max(0,o-1):o),l})}return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("header",{className:"sticky top-0 z-10 border-b border-white/10 bg-zinc-950/70 backdrop-blur",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-3 flex items-center gap-3",children:[e.jsx("div",{className:"text-lg font-bold",children:"Manual Builder — APP"}),e.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[e.jsx("select",{className:"bg-zinc-900 border border-white/10 rounded px-2 py-1",value:g.key,onChange:t=>P(f.find(s=>s.key===t.target.value)),children:f.map(t=>e.jsx("option",{value:t.key,children:t.label},t.key))}),e.jsxs("label",{className:"text-sm opacity-80",children:["Scale",e.jsxs("select",{className:"ml-2 bg-zinc-900 border border-white/10 rounded px-2 py-1",value:b,onChange:t=>_(Number(t.target.value)),children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:3,children:"3x"})]})]}),e.jsx("button",{onClick:()=>j(!0),className:"px-3 py-1 rounded bg-brand-600 hover:bg-brand-500",children:"Generate"})]})]})}),e.jsxs("main",{className:"mx-auto max-w-7xl p-4 grid grid-cols-12 gap-4",children:[e.jsxs("aside",{className:"col-span-4 space-y-4",children:[e.jsxs("div",{className:"card rounded-2xl p-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Header"}),e.jsx("img",{src:c,className:"w-full h-24 object-cover rounded-lg mb-2"}),e.jsx("input",{type:"file",accept:"image/*",onChange:C}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"Title"}),e.jsx("input",{value:r,onChange:t=>u(t.target.value),className:"w-full bg-zinc-900 border border-white/10 rounded px-3 py-2"})]})]}),e.jsxs("div",{className:"card rounded-2xl p-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Screenshots"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:A}),d.length>0&&e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["Đã import ",d.length," file",d.length>1?"s":""]}),e.jsx("div",{className:"mt-3 max-h-[48vh] overflow-auto space-y-3 pr-1",children:d.map((t,s)=>e.jsxs("div",{className:T("flex gap-3 p-2 rounded-lg border",s===m?"border-brand-500 bg-white/5":"border-white/10 bg-white/[0.03]"),children:[e.jsx("button",{className:"shrink-0",onClick:()=>p(s),children:e.jsx("img",{src:t.annotatedSrc||t.src,className:"w-16 h-16 object-cover rounded-md border border-white/10"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-xs opacity-75 mb-1",children:["Bước: ",s+1]}),e.jsx("textarea",{placeholder:"Mô tả bước...",value:t.description,onChange:a=>D(t.id,a.target.value),className:"w-full bg-zinc-900 border border-white/10 rounded px-2 py-2 text-sm h-16"})]}),e.jsx("button",{onClick:()=>{confirm("Xóa ảnh này?")&&E(t.id)},className:"self-start text-xs px-2 py-1 rounded bg-red-600 hover:bg-red-500",title:"Xóa ảnh này",children:"Xóa"})]},t.id))})]})]}),e.jsx("section",{className:"col-span-8",children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"card rounded-2xl p-4",children:"Đang tải editor…"}),children:e.jsx(H,{shot:k,color:"#f43f5e",tool:w,setTool:S,onUpdate:v,onReset:z})})})]}),e.jsx(i.Suspense,{fallback:null,children:e.jsx(L,{open:R,onClose:()=>j(!1),title:r,headerUrl:c,shots:d,preset:g,pixelRatio:b})})]})}export{O as default};
